# Silverlight 2.0 Beta 1 içerisinde DataGrid kullanımı! 

**Silverlight 2.0 Beta 1** ile beraber gelen ilginç kontrollerden biri
de DataGrid kontrolüdür. Aslında kontrolün kendisinde herhangi bir
ilginçlik yok, ilginç olan WPF'in ilk sürümlerinde böyle bir kontrol
yokken Silverlight'ın ikinci sürümünde DataGrid'in geliyor olması. Bu
yazımızda Silverlight 2.0 Beta 1 ile **DataGrid** kullanımına
deyineceğiz.

Silverlight 2.0 projenizi Visual Studio 2008 ile yarattıktan sonra hemen
araç çubuğunda **DataGrid** kontrolü ile karşılaşabilirsiniz. Expression
Blend içerisinde ise varsayılan ayarlar ile gelmeyecektir. Bunun aslında
basit bir nedeni var; DataGrid gibi veri kontrolleri Silverlight 2.0
için harici bir Control Library olan **System.Windows.Controls.Data**
altında geliyor ve bu kütüphane normal şartlarda uygulamaları referans
olarak eklenmiş olmuyor. Eğer uygulamanıza bu sınıfı referans olarak
eklerseniz Blend içerisinde de gerekli seçenekler gelecektir. Visual
Studio içerisinde sahneye bir DataGrid yerleştirdiğinizde gerekli
referanslar otomatik olarak ekleniyor.

<span style="color: blue;">\<</span><span
style="color: #a31515;">UserControl</span><span style="color: blue;">
</span><span style="color: red;"> **xmlns:my**</span><span
style="color: blue;">**=**</span>"<span
style="color: blue;">**clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data**</span>"<span
style="color: blue;">  </span><span
style="color: red;">x:Class</span><span
style="color: blue;">=</span>"<span
style="color: blue;">SilverlightApplication25.Page</span>"

<span style="color: blue;">    </span><span
style="color: red;">xmlns</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/client/2007</span>"<span
style="color: blue;"> </span>

<span style="color: blue;">    </span><span
style="color: red;">xmlns:x</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/winfx/2006/xaml</span>"<span
style="color: blue;"> </span>

<span style="color: blue;">    </span><span
style="color: red;">Width</span><span
style="color: blue;">=</span>"<span
style="color: blue;">400</span>"<span style="color: blue;"> </span><span
style="color: red;">Height</span><span
style="color: blue;">=</span>"<span
style="color: blue;">300</span>"<span style="color: blue;">\></span>

<span style="color: blue;">    \<</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span
style="color: blue;">LayoutRoot</span>"<span style="color: blue;">
</span><span style="color: red;">Background</span><span
style="color: blue;">=</span>"<span
style="color: blue;">White</span>"<span style="color: blue;">\></span>

<span style="color: blue;">      \<</span><span
style="color: #a31515;">**my**:DataGrid</span><span
style="color: blue;">\>\<**/**</span><span
style="color: #a31515;">**my**:DataGrid</span><span
style="color: blue;">\></span>

<span style="color: blue;">    \</</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">\></span>

<span style="color: blue;">\</</span><span
style="color: #a31515;">UserControl</span><span
style="color: blue;">\></span>

Yukarıdaki kodu incelediğinizde herhangi bir Silverlight uygulamasına
DataGrid yerleştirildiğinde en üst satırdaki XML namespace tanımını
görebilirsiniz. Söz konusu tanım veri kontrollerinin Assembly'lerine
bağlı. Böylece artık uygulamamızda veri kontrollerini kullanabiliriz.
Bunun bir sonucu olarak artık uygulamamızdan üretilecek XAP paketinde de
**System.Windows.Controls.Data.dll** dosyası bulunacaktır.

İlk olarak istemci tarafındaki kodumuz ile DataGrid içerisinde
gösterilmek üzere bir veri yığını yaratalım. Bu noktada siz
uygulamalarınızda rahatlıkla farklı web servislerinden çektiğiniz
verileri kullanabilirsiniz.

**[VB]**

    <span style="color: blue;">Public</span> <span
style="color: blue;">Class</span> Urun

 

        <span style="color: blue;">Private</span> PAdi <span
style="color: blue;">As</span> <span style="color: blue;">String</span>

        <span style="color: blue;">Public</span> <span
style="color: blue;">Property</span> Adi() <span
style="color: blue;">As</span> <span style="color: blue;">String</span>

            <span style="color: blue;">Get</span>

                <span style="color: blue;">Return</span> PAdi

            <span style="color: blue;">End</span> <span
style="color: blue;">Get</span>

            <span style="color: blue;">Set</span>(<span
style="color: blue;">ByVal</span> value <span
style="color: blue;">As</span> <span style="color: blue;">String</span>)

                PAdi = value

            <span style="color: blue;">End</span> <span
style="color: blue;">Set</span>

        <span style="color: blue;">End</span> <span
style="color: blue;">Property</span>

 

 

        <span style="color: blue;">Private</span> PStok <span
style="color: blue;">As</span> <span style="color: blue;">Boolean</span>

        <span style="color: blue;">Public</span> <span
style="color: blue;">Property</span> Stok() <span
style="color: blue;">As</span> <span style="color: blue;">Boolean</span>

            <span style="color: blue;">Get</span>

                <span style="color: blue;">Return</span> PStok

            <span style="color: blue;">End</span> <span
style="color: blue;">Get</span>

            <span style="color: blue;">Set</span>(<span
style="color: blue;">ByVal</span> value <span
style="color: blue;">As</span> <span
style="color: blue;">Boolean</span>)

                PStok = value

            <span style="color: blue;">End</span> <span
style="color: blue;">Set</span>

        <span style="color: blue;">End</span> <span
style="color: blue;">Property</span>

 

        <span style="color: blue;">Sub</span> <span
style="color: blue;">New</span>()

 

        <span style="color: blue;">End</span> <span
style="color: blue;">Sub</span>

 

        <span style="color: blue;">Sub</span> <span
style="color: blue;">New</span>(<span style="color: blue;">ByVal</span>
adi <span style="color: blue;">As</span> <span
style="color: blue;">String</span>, <span
style="color: blue;">ByVal</span> stok <span
style="color: blue;">As</span> <span
style="color: blue;">Boolean</span>)

            <span style="color: blue;">Me</span>.Adi = adi

            <span style="color: blue;">Me</span>.Stok = stok

        <span style="color: blue;">End</span> <span
style="color: blue;">Sub</span>

 

    <span style="color: blue;">End</span> <span
style="color: blue;">Class</span>

**[C\#]**

    <span style="color: blue;">public</span> <span
style="color: blue;">class</span> <span
style="color: #2b91af;">Urun</span>

    {

 

        <span style="color: blue;">private</span> <span
style="color: blue;">string</span> PAdi;

        <span style="color: blue;">public</span> <span
style="color: blue;">string</span> Adi

        {

            <span style="color: blue;">get</span> { <span
style="color: blue;">return</span> PAdi; }

            <span style="color: blue;">set</span> { PAdi = <span
style="color: blue;">value</span>; }

        }

 

 

        <span style="color: blue;">private</span> <span
style="color: blue;">bool</span> PStok;

        <span style="color: blue;">public</span> <span
style="color: blue;">bool</span> Stok

        {

            <span style="color: blue;">get</span> { <span
style="color: blue;">return</span> PStok; }

            <span style="color: blue;">set</span> { PStok = <span
style="color: blue;">value</span>; }

        }

 

        <span style="color: blue;">public</span> Urun()

        {

 

        }

 

        <span style="color: blue;">public</span> Urun(<span
style="color: blue;">string</span> adi, <span
style="color: blue;">bool</span> stok)

        {

            <span style="color: blue;">this</span>.Adi = adi;

            <span style="color: blue;">this</span>.Stok = stok;

        }

 

    }

Yukarıdaki sınıf yapısını verimizi oluştururken kullanacağımız nesneler
olarak hazırladık. Silverlight 2.0'daki DataBinding WPF ile büyük bir
benzerliğe sahip. Özellikle LINQ ile beraber kullanıldığında nesneleri
kontrollere bind edebiliyor olmak büyük avantaj sağlıyor. Şimdi gelelim
bize geçici olarak veri yaratacak olan kodumuzu yazmaya.

**[VB]**

    <span style="color: blue;">Private</span> <span
style="color: blue;">Sub</span> Page\_Loaded(<span
style="color: blue;">ByVal</span> sender <span
style="color: blue;">As</span> <span style="color: blue;">Object</span>,
<span style="color: blue;">ByVal</span> e <span
style="color: blue;">As</span> System.Windows.RoutedEventArgs) <span
style="color: blue;">Handles</span> <span
style="color: blue;">Me</span>.Loaded

        <span style="color: blue;">Dim</span> liste <span
style="color: blue;">As</span> <span style="color: blue;">New</span>
System.Collections.Generic.List(<span style="color: blue;">Of</span>
Urun)

        <span style="color: blue;">For</span> x <span
style="color: blue;">As</span> <span style="color: blue;">Integer</span>
= 0 <span style="color: blue;">To</span> 9

            liste.Add(<span style="color: blue;">New</span> Urun(<span
style="color: #a31515;">"Urun Adi"</span> & x, (Math.Round(Rnd() \* 1) -
1)))

        <span style="color: blue;">Next</span>

        BirGrid.ItemsSource = liste

    <span style="color: blue;">End</span> <span
style="color: blue;">Sub</span>

**[C\#]**

        <span style="color: blue;">public</span> Page()

        {

            InitializeComponent();

 

            System.Collections.Generic.<span
style="color: #2b91af;">List</span>\<Urun\> liste = <span
style="color: blue;">new</span> System.Collections.Generic.<span
style="color: #2b91af;">List</span>\<Urun\>();

            <span style="color: #2b91af;">Random</span> RastGele = <span
style="color: blue;">new</span> <span
style="color: #2b91af;">Random</span>();

            <span style="color: blue;">for</span> (<span
style="color: blue;">int</span> x = 0; x \<= 9; x++)

            {

                liste.Add(<span style="color: blue;">new</span>
Urun(<span style="color: #a31515;">"Urun Adi"</span> + x.ToString(),
<span style="color: #2b91af;">Convert</span>.ToBoolean(RastGele.Next(0,
1) - 1)));

            }

            BirGrid.ItemsSource = liste;

        }

Kod içerisinde de gördüğünüz gibi elimizdeki veriyi doğrudan BirGrid
adındaki DataGridimizin **ItemsSource** özelliğine bağlıyoruz. Böylece
**DataBinding** işlemi tamamlanmış oldu. Fakat bağladığımız bu verinin
Grid içerisinde kolonlara yerleşmesi için tabi bizim "kolon"lara
ihtiyacımız var. Otomatik olarak veriye uygun kolon yaratılabilmesi için
DataGrid'in **AutoGenerateColumns** özelliğinin **True** olarak
ayarlanmış olması gerekiyor.

<span style="color: blue;">\<</span><span
style="color: #a31515;">UserControl</span><span style="color: blue;">
</span><span style="color: red;">xmlns:my</span><span
style="color: blue;">=</span>"<span
style="color: blue;">clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data</span>"<span
style="color: blue;">  </span><span
style="color: red;">x:Class</span><span
style="color: blue;">=</span>"<span
style="color: blue;">SilverlightApplication25.Page</span>"

<span style="color: blue;">    </span><span
style="color: red;">xmlns</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/client/2007</span>"

<span style="color: blue;">    </span><span
style="color: red;">xmlns:x</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/winfx/2006/xaml</span>"

<span style="color: blue;">    </span><span
style="color: red;">Width</span><span
style="color: blue;">=</span>"<span
style="color: blue;">400</span>"<span style="color: blue;"> </span><span
style="color: red;">Height</span><span
style="color: blue;">=</span>"<span
style="color: blue;">300</span>"<span style="color: blue;">\></span>

<span style="color: blue;">  \<</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span
style="color: blue;">LayoutRoot</span>"<span style="color: blue;">
</span><span style="color: red;">Background</span><span
style="color: blue;">=</span>"<span
style="color: blue;">White</span>"<span style="color: blue;">\></span>

<span style="color: blue;">    \<</span><span
style="color: #a31515;">my:DataGrid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span
style="color: blue;">**BirGrid**</span>"<span style="color: blue;">
</span><span style="color: red;"> **AutoGenerateColumns**</span><span
style="color: blue;">=</span>"<span
style="color: blue;">True</span>"<span
style="color: blue;">\>\</</span><span
style="color: #a31515;">my:DataGrid</span><span
style="color: blue;">\></span>

<span style="color: blue;">  \</</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">\></span>

<span style="color: blue;">\</</span><span
style="color: #a31515;">UserControl</span><span
style="color: blue;">\></span>

XAML kodumuzun son hali yukarıdaki gibi olmalı. Böylece uygulamamızı
çalıştırdığımızda aşağıdaki manzara ile karşılaşabiliriz.

![Silverlight 2.0 içerisinde DataGrid
görüntüsü.](../media/Silverlight_2_0_Beta_1_icerisinde_DataGrid_kullanimi/05062008_1.png)\
*Silverlight 2.0 içerisinde DataGrid görüntüsü.*

İsterseniz alternatif satırların fon renklerini hatta kolonlar arası
çizgilerin renklerini bile tek tek belirleyebilirsiniz. Aşağıdaki kod
yapabileceğiniz renk değişikliklerine dair bir ipucu olabilir.

<span style="color: blue;">\<</span><span
style="color: #a31515;">UserControl</span><span style="color: blue;">
</span><span style="color: red;">xmlns:my</span><span
style="color: blue;">=</span>"<span
style="color: blue;">clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data</span>"

<span style="color: blue;">            </span><span
style="color: red;">x:Class</span><span
style="color: blue;">=</span>"<span
style="color: blue;">SilverlightApplication25.Page</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/client/2007</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns:x</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/winfx/2006/xaml</span>"

<span style="color: blue;">            </span><span
style="color: red;">Width</span><span
style="color: blue;">=</span>"<span style="color: blue;">400</span>"

<span style="color: blue;">            </span><span
style="color: red;">Height</span><span
style="color: blue;">=</span>"<span
style="color: blue;">300</span>"<span style="color: blue;">\></span>

<span style="color: blue;">  \<</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span
style="color: blue;">LayoutRoot</span>"

<span style="color: blue;">        </span><span
style="color: red;">Background</span><span
style="color: blue;">=</span>"<span
style="color: blue;">White</span>"<span style="color: blue;">\></span>

<span style="color: blue;">    \<</span><span
style="color: #a31515;">my:DataGrid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span style="color: blue;">BirGrid</span>"

<span style="color: blue;">                </span><span
style="color: red;">AutoGenerateColumns</span><span
style="color: blue;">=</span>"<span style="color: blue;">True</span>"

<span style="color: blue;">              ** ** </span><span
style="color: red;">**AlternatingRowBackground**</span><span
style="color: blue;">**=**</span>"<span
style="color: blue;">**\#FFFFFF00**</span>**"**

<span style="color: blue;">**               ** </span><span
style="color: red;">**HorizontalGridlinesBrush**</span><span
style="color: blue;">**=**</span>"<span
style="color: blue;">**\#FFD4FF00**</span>**"**

<span style="color: blue;">**               ** </span><span
style="color: red;">**RowBackground**</span><span
style="color: blue;">**=**</span>"<span
style="color: blue;">**\#FFE3E3E3**</span>"<span
style="color: blue;">\>\</</span><span
style="color: #a31515;">my:DataGrid</span><span
style="color: blue;">\></span>

<span style="color: blue;">  \</</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">\></span>

<span style="color: blue;">\</</span><span
style="color: #a31515;">UserControl</span><span
style="color: blue;">\></span>

**Kendi kolonlarımızı tanımlayalım!**

Aslında **AutoGenerateColumns** özelliği bizim ASP.NET'teki GridView'den
de alışık olduğumuz bir özellik. Kolay bir kullanım sağlasa da çoğu
zaman bu özellik istediğimiz uygulamaları hazırlayabilmemiz için yeterli
değil. O nedenle gelin şimdi beraber bir DataGrid içerisinde kolonları
nasıl elle ayarlayabileceğimizi inceleyelim.

Eğer **AutoGenerateColumns** özelliğini **True** yapmazsanız hali
hazırda varsayılan ayarı zaten **False** olarak geliyor. O nedenle bir
önceki projemize devam edeceğimiz için ilk olarak ya
**AutoGenerateColumns** özelliğini XAML kodunuzdan silin ya da **False**
olarak ayarlayın.

Bir DataGrid'in üç çeşit kolonu olabilir;

-   DataGridTextBoxColumn
-   DataGridCheckBoxColumn
-    DataGridTemplateColumn

Adlarından da anlaşılacağı üzere ikisi kendi isimlerindeki kontrolleri
kolonlara yerleştirirken **TemplateColumn** ise bize daha esnek bir yapı
sağlıyor. İlk olarak gelin **TextBoxColumn** ve **CheckBoxColumn**
kullanarak bir önceki adımdaki örneğimizin kolonlarını elle
tanımlayalım.

<span style="color: blue;">    \<</span><span
style="color: #a31515;">my:DataGrid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span style="color: blue;">BirGrid</span>"

<span style="color: blue;">                </span><span
style="color: red;">AutoGenerateColumns</span><span
style="color: blue;">=</span>"<span style="color: blue;">False</span>"

<span style="color: blue;">                </span><span
style="color: red;">AlternatingRowBackground</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFFFFF00</span>"

<span style="color: blue;">                </span><span
style="color: red;">HorizontalGridlinesBrush</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFD4FF00</span>"

<span style="color: blue;">                </span><span
style="color: red;">RowBackground</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFE3E3E3</span>"<span
style="color: blue;">\></span>

<span style="color: blue;">      \<</span><span
style="color: #a31515;">my:DataGrid.Columns</span><span
style="color: blue;">\></span>

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridTextBoxColumn</span><span
style="color: blue;"> </span><span style="color: red;">
**Header**</span><span style="color: blue;">=</span>"<span
style="color: blue;">Adi</span>"

<span style="color: blue;">                                 
</span><span style="color: red;"> **DisplayMemberBinding**</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding
**Adi**}</span>"<span style="color: blue;"> /\></span>

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridCheckBoxColumn</span><span
style="color: blue;"> </span><span style="color: red;">
**Header**</span><span style="color: blue;">=</span>"<span
style="color: blue;">Stokta Var?</span>"

<span style="color: blue;">                                 
</span><span style="color: red;"> **DisplayMemberBinding**</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding
**Stok**}</span>"<span style="color: blue;"> /\></span>

 

<span style="color: blue;">      \</</span><span
style="color: #a31515;">my:DataGrid.Columns</span><span
style="color: blue;">\></span>

<span style="color: blue;">    \</</span><span
style="color: #a31515;">my:DataGrid</span><span
style="color: blue;">\></span>

Kolonlarımızı ekledikten sonra her kolonun **Header** özelliğini
değiştirerek o kolonda gözükecek olan başlığı ayarlayabiliyoruz. Son
olarak da veri kaynağından hangi **Property'nin** söz konusu kolonda
gözükeceğini belirlemek için bir **Binding** kullanıyoruz. Görsel olarak
sonuç bir önceki örneğimizdeki ile aynı olacak fakat bu sefer kolonları
biz el ile tek tek ayarlamış olduk. Bunun getireceği esnekliği özellikle
**TemplateColumn** ile çok daha rahat görebiliriz.

**Özel kolonlar : TemplateColumn**

Özel bir kolon tanımlarken yapmamız gereken iki şey var; ilk olarak
kolonun normal görüntüsünü tanımlamak, ikincisi ise "edit" modundaki
görüntüsünü tanımlamak. Eğer **ReadOnly** özelliklerini değiştirmezseniz
normal şartlarda hem **TextBoxColumn** hem de **CheckBoxColumn**
üzerlerine tıklandıklarında içlerindeki verinin değiştirilebilmesine
olanak tanırlar. Hatta **Binding Mode** olarak da **TwoWay**
parametresini aktarırsanız arka planda Bind ettiğiniz List içerisinde
gerekli değişiklikler de otomatik olarak yapılır. Şimdi biz tüm bunları
bir TemplateColumn ile deneyeceğiz. Amacımız **Stok** bilgisi gösteren
kolonu biraz değiştirerek normalde içerisinde True veya False yazmasını
sağlamak. Yani normal şartlarda o kolonda bir **CheckBox** gözükmeyecek,
fakat kullanıcına kolona çift tıklar ve değeri değiştirmek isterse
karşınızda bu sefer bir **CheckBox** gelecek.

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn</span><span
style="color: blue;"> </span><span
style="color: red;">Header</span><span
style="color: blue;">=</span>"<span style="color: blue;">Stokta
Var?</span>"<span style="color: blue;">\></span>

<span style="color: blue;">          \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn.**CellTemplate**</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \<</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">              \<</span><span
style="color: #a31515;">**TextBlock**</span><span style="color: blue;">
</span><span style="color: red;">Text</span><span
style="color: blue;">=</span>"<span style="color: blue;">{**Binding
Stok**}</span>"<span style="color: blue;">/\></span>

<span style="color: blue;">            \</</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn.**CellTemplate**</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn.**CellEditingTemplate**</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \<</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">              \<</span><span
style="color: #a31515;">**CheckBox**</span><span style="color: blue;">
</span><span style="color: red;">IsChecked</span><span
style="color: blue;">=</span>"<span style="color: blue;">**{Binding
Stok, Mode=TwoWay}**</span>"<span style="color: blue;">\>\</</span><span
style="color: #a31515;">CheckBox</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \</</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn.**CellEditingTemplate**</span><span
style="color: blue;">\></span>

<span style="color: blue;">        \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn</span><span
style="color: blue;">\></span>

Yukarıdaki kodu detaylı olarak incelemekte fayda var. Yarattığımız
TemplateColumn'un içerisinde bir **CellTemplate**, bir de
**CellEditingTemplate** var. Bu kolonun normal şartlardaki görüntüsü
CellTemplate, düzenleme modundaki görüntüsü ise CellEditingTemplate
içerisindeki şablona göre hazırlanacak. CellTemplate içerisinde
DataTemplate içinde sadece bir TextBlock koyuyoruz ve söz konusu
**TextBlock'un** da **Text** özelliğini **Stok** bilgisini bind
ediyoruz. Böylece normalde Stok bilgisi String olarak bu TextBlock
içerisinde gösterilecek. Gelelim **CellEditingTemplate** şablonunda; bu
şablon içerisinde de bir **CheckBox** kullanarak söz konusu CheckBox'un
**IsChecked** özelliğini **Stok** Property'sine Bind ederken **Mode**
olarak da **TwoWay'i** seçiyoruz. Böylece bu CheckBox üzerinde yapılan
değişiklikler elimizdeki List verimize yansıyacak, yani kaydedilecek.

Uygulamamızın tam XAML kodunu aşağıda inceleyebilirsiniz.

<span style="color: blue;">\<</span><span
style="color: #a31515;">UserControl</span><span style="color: blue;">
</span><span style="color: red;">xmlns:my</span><span
style="color: blue;">=</span>"<span
style="color: blue;">clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data</span>"

<span style="color: blue;">            </span><span
style="color: red;">x:Class</span><span
style="color: blue;">=</span>"<span
style="color: blue;">SilverlightApplication25.Page</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/client/2007</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns:x</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/winfx/2006/xaml</span>"

<span style="color: blue;">            </span><span
style="color: red;">Width</span><span
style="color: blue;">=</span>"<span style="color: blue;">400</span>"

<span style="color: blue;">            </span><span
style="color: red;">Height</span><span
style="color: blue;">=</span>"<span
style="color: blue;">300</span>"<span style="color: blue;">\></span>

<span style="color: blue;">  \<</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span
style="color: blue;">LayoutRoot</span>"

<span style="color: blue;">        </span><span
style="color: red;">Background</span><span
style="color: blue;">=</span>"<span
style="color: blue;">White</span>"<span style="color: blue;">\></span>

<span style="color: blue;">    \<</span><span
style="color: #a31515;">my:DataGrid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span style="color: blue;">BirGrid</span>"

<span style="color: blue;">                </span><span
style="color: red;">AutoGenerateColumns</span><span
style="color: blue;">=</span>"<span style="color: blue;">False</span>"

<span style="color: blue;">                </span><span
style="color: red;">AlternatingRowBackground</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFFFFF00</span>"

<span style="color: blue;">                </span><span
style="color: red;">HorizontalGridlinesBrush</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFD4FF00</span>"

<span style="color: blue;">                </span><span
style="color: red;">RowBackground</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFE3E3E3</span>"<span
style="color: blue;">\></span>

<span style="color: blue;">      \<</span><span
style="color: #a31515;">my:DataGrid.Columns</span><span
style="color: blue;">\></span>

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridTextBoxColumn</span><span
style="color: blue;"> </span><span
style="color: red;">Header</span><span
style="color: blue;">=</span>"<span style="color: blue;">Adi</span>"

<span style="color: blue;">                                 
</span><span style="color: red;">DisplayMemberBinding</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding
Adi}</span>"<span style="color: blue;"> /\></span>

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridCheckBoxColumn</span><span
style="color: blue;"> </span><span
style="color: red;">Header</span><span
style="color: blue;">=</span>"<span style="color: blue;">Stokta
Var?</span>"

<span style="color: blue;">                                 
</span><span style="color: red;">DisplayMemberBinding</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding
Stok}</span>"<span style="color: blue;"> /\></span>

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn</span><span
style="color: blue;"> </span><span
style="color: red;">Header</span><span
style="color: blue;">=</span>"<span style="color: blue;">Stokta
Var?</span>"<span style="color: blue;">\></span>

<span style="color: blue;">          \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn.CellTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \<</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">              \<</span><span
style="color: #a31515;">TextBlock</span><span style="color: blue;">
</span><span style="color: red;">Text</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding
Stok}</span>"<span style="color: blue;">/\></span>

<span style="color: blue;">            \</</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn.CellTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn.CellEditingTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \<</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">              \<</span><span
style="color: #a31515;">CheckBox</span><span style="color: blue;">
</span><span style="color: red;">IsChecked</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding Stok,
Mode=TwoWay}</span>"<span style="color: blue;">\>\</</span><span
style="color: #a31515;">CheckBox</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \</</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn.CellEditingTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">        \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn</span><span
style="color: blue;">\></span>

<span style="color: blue;">      \</</span><span
style="color: #a31515;">my:DataGrid.Columns</span><span
style="color: blue;">\></span>

<span style="color: blue;">    \</</span><span
style="color: #a31515;">my:DataGrid</span><span
style="color: blue;">\></span>

<span style="color: blue;">  \</</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">\></span>

<span style="color: blue;">\</</span><span
style="color: #a31515;">UserControl</span><span
style="color: blue;">\></span>

**IValueConverter ile Binding'lere müdahale edin**

Bir önceki örnek biraz saçma gelmiş olabilir. Kolon içerisinde doğrudan
True veya False yazıyor olmak pek hoş değil. Stok bilgisinden
bahsettiğimize göre True veya Flase yerine "Var" veya "Yok" yazdırsak
belki çok daha mantıklı olabilirdi. Kullanıcı satıra tıkladığında ise
yine karşısına düzenleme modunda bir CheckBox gelecektir. Bu işlemi
yapabilmemiz için bizim **CellTemplate** içerisindeki TextBlock'un
Binding'ine müdahale ederek "*Eğer True geliyorsa VAR yazdır, gelmiyorsa
YOK yazdır*" diyebilmemiz gerekiyor. İşte tam da bu işlemi yapabilmek
için **Silverlight 2.0 Beta 1** içerisinde ValueConverter yapılarını
kullanabiliyoruz.

**[VB]**

<span style="color: blue;">Public</span> <span
style="color: blue;">Class</span> StokCevirici

    <span style="color: blue;">Implements</span> Data.IValueConverter

 

    <span style="color: blue;">Public</span> <span
style="color: blue;">Function</span> Convert(<span
style="color: blue;">ByVal</span> value <span
style="color: blue;">As</span> <span style="color: blue;">Object</span>,
<span style="color: blue;">ByVal</span> targetType <span
style="color: blue;">As</span> System.Type, <span
style="color: blue;">ByVal</span> parameter <span
style="color: blue;">As</span> <span style="color: blue;">Object</span>,
<span style="color: blue;">ByVal</span> culture <span
style="color: blue;">As</span> System.Globalization.CultureInfo) <span
style="color: blue;">As</span> <span style="color: blue;">Object</span>
<span style="color: blue;">Implements</span>
System.Windows.Data.IValueConverter.Convert

        <span style="color: blue;">If</span> value <span
style="color: blue;">Then</span>

            <span style="color: blue;">Return</span> <span
style="color: #a31515;">"Var"</span>

        <span style="color: blue;">Else</span>

            <span style="color: blue;">Return</span> <span
style="color: #a31515;">"Yok"</span>

        <span style="color: blue;">End</span> <span
style="color: blue;">If</span>

    <span style="color: blue;">End</span> <span
style="color: blue;">Function</span>

 

    <span style="color: blue;">Public</span> <span
style="color: blue;">Function</span> ConvertBack(<span
style="color: blue;">ByVal</span> value <span
style="color: blue;">As</span> <span style="color: blue;">Object</span>,
<span style="color: blue;">ByVal</span> targetType <span
style="color: blue;">As</span> System.Type, <span
style="color: blue;">ByVal</span> parameter <span
style="color: blue;">As</span> <span style="color: blue;">Object</span>,
<span style="color: blue;">ByVal</span> culture <span
style="color: blue;">As</span> System.Globalization.CultureInfo) <span
style="color: blue;">As</span> <span style="color: blue;">Object</span>
<span style="color: blue;">Implements</span>
System.Windows.Data.IValueConverter.ConvertBack

        <span style="color: blue;">If</span> value = <span
style="color: #a31515;">"Var"</span> <span
style="color: blue;">Then</span>

            <span style="color: blue;">Return</span> <span
style="color: blue;">True</span>

        <span style="color: blue;">Else</span>

            <span style="color: blue;">Return</span> <span
style="color: blue;">False</span>

        <span style="color: blue;">End</span> <span
style="color: blue;">If</span>

    <span style="color: blue;">End</span> <span
style="color: blue;">Function</span>

<span style="color: blue;">End</span> <span
style="color: blue;">Class</span>

**[C\#]**

    <span style="color: blue;">public</span> <span
style="color: blue;">class</span> <span
style="color: #2b91af;">StokCevirici</span> :
System.Windows.Data.IValueConverter

    {

 

        <span style="color: blue;">object</span>
System.Windows.Data.IValueConverter.Convert(<span
style="color: blue;">object</span> value, System.<span
style="color: #2b91af;">Type</span> targetType, <span
style="color: blue;">object</span> parameter, System.Globalization.<span
style="color: #2b91af;">CultureInfo</span> culture)

        {

            <span style="color: blue;">if</span> (<span
style="color: blue;">bool</span>.Parse(value.ToString()))

            {

                <span style="color: blue;">return</span> <span
style="color: #a31515;">"Var"</span>;

            }

            <span style="color: blue;">else</span>

            {

                <span style="color: blue;">return</span> <span
style="color: #a31515;">"Yok"</span>;

            }

        }

 

        <span style="color: blue;">object</span>
System.Windows.Data.IValueConverter.ConvertBack(<span
style="color: blue;">object</span> value, System.<span
style="color: #2b91af;">Type</span> targetType, <span
style="color: blue;">object</span> parameter, System.Globalization.<span
style="color: #2b91af;">CultureInfo</span> culture)

        {

            <span style="color: blue;">if</span> (value.ToString() ==
<span style="color: #a31515;">"Var"</span>)

            {

                <span style="color: blue;">return</span> <span
style="color: blue;">true</span>;

            }

            <span style="color: blue;">else</span>

            {

                <span style="color: blue;">return</span> <span
style="color: blue;">false</span>;

            }

        }

    }

İlk olarak yukarıdaki şekilde **System.Windows.Data.IValueConverter**
sınıfını implemente etmemiz gerekiyor. Bu şekilde bir **Converter**
yapısının her zaman bir **Convert** ve bir de **ConvertBack**
metodlarının bulunması şart. Bu metodlar aslında bizim elimizdeki True
veya False olan **Boolean** değerinin String'e çevireceğimiz ve Binding
için DataGrid'e göndereceğimiz veriyi oluşturmamıza olanak tanıyorlar.
Kod içerisinde de duruma göre parametre olarak gelen Boolean değeri
String'e veya tam tersine işlemler yapıyoruz. Sıra geldi bu
**Converter** yapısını XAML kodumuzda kullanarak Binding işlemine dahil
etmeye.

<span style="color: blue;">\<</span><span
style="color: #a31515;">UserControl</span><span style="color: blue;">
</span><span style="color: red;">xmlns:my</span><span
style="color: blue;">=</span>"<span
style="color: blue;">clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data</span>"

<span style="color: blue;">            </span><span
style="color: red;">x:Class</span><span
style="color: blue;">=</span>"<span
style="color: blue;">SilverlightApplication25.Page</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/client/2007</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns:x</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/winfx/2006/xaml</span>"

<span style="color: blue;">  **         ** </span><span
style="color: red;">**xmlns:local**</span><span
style="color: blue;">**=**</span>"<span
style="color: blue;">**clr-namespace:SilverlightApplication25**</span>"

<span style="color: blue;">            </span><span
style="color: red;">Width</span><span
style="color: blue;">=</span>"<span style="color: blue;">400</span>"

<span style="color: blue;">            </span><span
style="color: red;">Height</span><span
style="color: blue;">=</span>"<span
style="color: blue;">300</span>"<span style="color: blue;">\></span>

İlk olarak yukarıdaki şekilde XAML içerisinde kullanacağımız
Assembly'mizi tanımlıyoruz. Böylece Converter sınıfımızı rahatlıkla
kullanabileceğiz. Fakat işlemler bu kadarla bitmiyor. Tanımladığımız
Assembly içerisinde Convertor'ımızı da alarak sayfada Resource olarak
yerleştirmemiz şart.

<span style="color: blue;">  \<</span><span
style="color: #a31515;">UserControl.Resources</span><span
style="color: blue;">\></span>

<span style="color: blue;">    \<</span><span
style="color: #a31515;">local:StokCevirici</span><span
style="color: blue;"> </span><span style="color: red;">x:Key</span><span
style="color: blue;">=</span>"<span
style="color: blue;">StokCevirici</span>"<span style="color: blue;">
/\></span>

<span style="color: blue;">  \</</span><span
style="color: #a31515;">UserControl.Resources</span><span
style="color: blue;">\></span>

Tüm bu işlemlerde Visual Studio'nun Intellisense yapısı size yardımcı
olacaktır. Artık XAML tarafında **StokCevirici** adını verdiğimiz
**Converter** yapımızı istediğimiz bir **Binding** için kullanmaya
hazırız.

<span style="color: blue;">\<</span><span
style="color: #a31515;">UserControl</span><span style="color: blue;">
</span><span style="color: red;">xmlns:my</span><span
style="color: blue;">=</span>"<span
style="color: blue;">clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data</span>"

<span style="color: blue;">            </span><span
style="color: red;">x:Class</span><span
style="color: blue;">=</span>"<span
style="color: blue;">SilverlightApplication25.Page</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/client/2007</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns:x</span><span
style="color: blue;">=</span>"<span
style="color: blue;">http://schemas.microsoft.com/winfx/2006/xaml</span>"

<span style="color: blue;">            </span><span
style="color: red;">xmlns:local</span><span
style="color: blue;">=</span>"<span
style="color: blue;">clr-namespace:SilverlightApplication25</span>"

<span style="color: blue;">            </span><span
style="color: red;">Width</span><span
style="color: blue;">=</span>"<span style="color: blue;">400</span>"

<span style="color: blue;">            </span><span
style="color: red;">Height</span><span
style="color: blue;">=</span>"<span
style="color: blue;">300</span>"<span style="color: blue;">\></span>

<span style="color: blue;">  \<</span><span
style="color: #a31515;">UserControl.Resources</span><span
style="color: blue;">\></span>

<span style="color: blue;">    \<</span><span
style="color: #a31515;">local:StokCevirici</span><span
style="color: blue;"> </span><span style="color: red;">x:Key</span><span
style="color: blue;">=</span>"<span
style="color: blue;">StokCevirici</span>"<span style="color: blue;">
/\></span>

<span style="color: blue;">  \</</span><span
style="color: #a31515;">UserControl.Resources</span><span
style="color: blue;">\></span>

<span style="color: blue;">  \<</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span
style="color: blue;">LayoutRoot</span>"

<span style="color: blue;">        </span><span
style="color: red;">Background</span><span
style="color: blue;">=</span>"<span
style="color: blue;">White</span>"<span style="color: blue;">\></span>

<span style="color: blue;">    \<</span><span
style="color: #a31515;">my:DataGrid</span><span style="color: blue;">
</span><span style="color: red;">x:Name</span><span
style="color: blue;">=</span>"<span style="color: blue;">BirGrid</span>"

<span style="color: blue;">                </span><span
style="color: red;">AutoGenerateColumns</span><span
style="color: blue;">=</span>"<span style="color: blue;">False</span>"

<span style="color: blue;">                </span><span
style="color: red;">AlternatingRowBackground</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFFFFF00</span>"

<span style="color: blue;">                </span><span
style="color: red;">HorizontalGridlinesBrush</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFD4FF00</span>"

<span style="color: blue;">                </span><span
style="color: red;">RowBackground</span><span
style="color: blue;">=</span>"<span
style="color: blue;">\#FFE3E3E3</span>"<span
style="color: blue;">\></span>

<span style="color: blue;">      \<</span><span
style="color: #a31515;">my:DataGrid.Columns</span><span
style="color: blue;">\></span>

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridTextBoxColumn</span><span
style="color: blue;"> </span><span
style="color: red;">Header</span><span
style="color: blue;">=</span>"<span style="color: blue;">Adi</span>"

<span style="color: blue;">                                 
</span><span style="color: red;">DisplayMemberBinding</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding
Adi}</span>"<span style="color: blue;"> /\></span>

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridCheckBoxColumn</span><span
style="color: blue;"> </span><span
style="color: red;">Header</span><span
style="color: blue;">=</span>"<span style="color: blue;">Stokta
Var?</span>"

<span style="color: blue;">                                 
</span><span style="color: red;">DisplayMemberBinding</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding
Stok}</span>"<span style="color: blue;"> /\></span>

<span style="color: blue;">        \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn</span><span
style="color: blue;"> </span><span
style="color: red;">Header</span><span
style="color: blue;">=</span>"<span style="color: blue;">Stokta
Var?</span>"<span style="color: blue;">\></span>

<span style="color: blue;">          \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn.CellTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \<</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">              **\<**</span><span
style="color: #a31515;">**TextBlock**</span><span style="color: blue;">
**** </span><span style="color: red;">**Text**</span><span
style="color: blue;">**=**</span>"<span style="color: blue;">**{Binding
Stok, Converter={StaticResource StokCevirici}}**</span>"<span
style="color: blue;"> **/\>**</span>

<span style="color: blue;">            \</</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn.CellTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \<</span><span
style="color: #a31515;">my:DataGridTemplateColumn.CellEditingTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \<</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">              \<</span><span
style="color: #a31515;">CheckBox</span><span style="color: blue;">
</span><span style="color: red;">IsChecked</span><span
style="color: blue;">=</span>"<span style="color: blue;">{Binding Stok,
Mode=TwoWay}</span>"<span style="color: blue;">\>\</</span><span
style="color: #a31515;">CheckBox</span><span
style="color: blue;">\></span>

<span style="color: blue;">            \</</span><span
style="color: #a31515;">DataTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">          \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn.CellEditingTemplate</span><span
style="color: blue;">\></span>

<span style="color: blue;">        \</</span><span
style="color: #a31515;">my:DataGridTemplateColumn</span><span
style="color: blue;">\></span>

 

<span style="color: blue;">      \</</span><span
style="color: #a31515;">my:DataGrid.Columns</span><span
style="color: blue;">\></span>

<span style="color: blue;">    \</</span><span
style="color: #a31515;">my:DataGrid</span><span
style="color: blue;">\></span>

<span style="color: blue;">  \</</span><span
style="color: #a31515;">Grid</span><span style="color: blue;">\></span>

<span style="color: blue;">\</</span><span
style="color: #a31515;">UserControl</span><span
style="color: blue;">\></span>

Uygulamanın son halinin tam kodunu yukarıdaki inceleyebilirsiniz.
Özellikle yarattığımız Converter'ın kullanım şekline dikkat etmekte
fayda var. Artık **TextBlock** içerisinde gösterilen veriler söz konusu
**Converter'dan** geçtikten sonra gösterileceği için ekranda "Var" veya
"Yok" yazıları yer alacak. Oysa kullanıcı çift tıklayarak değeri
değiştirmek istediğinde karşısına bir **CheckBox** çıkacak ve True veya
False olabilecek **Boolean** değeri değiştiriyor olacak.

Hepinize kolay gelsin.


*Bu yazi http://daron.yondem.com adresinde, 2008-6-6 tarihinde yayinlanmistir.*